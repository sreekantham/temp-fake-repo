# Block Diagram - PM-5000 PMIC

**Document Version:** 1.0  
**Date:** October 2025  
**Status:** Draft

## 1. Introduction

This document provides detailed block diagrams for the PM-5000 PMIC, showing the internal architecture and signal flow.

## 2. Top-Level Block Diagram

```
                                PM-5000 PMIC
┌────────────────────────────────────────────────────────────────────────┐
│                                                                          │
│   VIN ─────────┬───────────────────────────────────────────────┐       │
│                │                                                 │       │
│         ┌──────▼──────┐                                          │       │
│         │   Input     │                                          │       │
│         │   UVLO &    │                                          │       │
│         │   Filter    │                                          │       │
│         └──────┬──────┘                                          │       │
│                │ VIN_OK                                          │       │
│         ┌──────▼──────┐                                          │       │
│         │   Bandgap   │                                          │       │
│         │  Reference  │                                          │       │
│         │   1.25V     │                                          │       │
│         └──────┬──────┘                                          │       │
│                │ VREF                                            │       │
│                ├──────────────────────────────┬──────────────┐  │       │
│                │                              │              │  │       │
│     ┌──────────▼─────────────┐    ┌──────────▼──────────┐  │  │       │
│     │  Channel 1 Power Stage │    │  Channel 2         │  │  │       │
│     │  ┌─────────────────┐   │    │  Power Stage       │  │  │       │
│     │  │  Sync Buck      │   │    └────────────────────┘  │  │       │
│     │  │  Converter      │   │             │               │  │       │
│     │  │  (1MHz)         │───┼─────────────┤               │  │       │
│     │  └─────────────────┘   │             │               │  │       │
│     │           │             │    ┌────────▼──────────┐   │  │       │
│     │  ┌────────▼─────────┐  │    │  Channel 3         │   │  │       │
│     │  │  LDO Post-       │  │    │  Power Stage       │   │  │       │
│     │  │  Regulator       │──┼────┴────────────────────┘   │  │       │
│     │  └──────────────────┘  │             │                │  │       │
│     └────────────────────────┘    ┌────────▼──────────┐    │  │       │
│                │                   │  Channel 4         │    │  │       │
│                │                   │  Power Stage       │    │  │       │
│                │                   └────────────────────┘    │  │       │
│                │                            │                │  │       │
│                └─ VOUT1                     └─ VOUT2-4       │  │       │
│                                                               │  │       │
│   ┌───────────────────────────────────────────────────┐     │  │       │
│   │          Analog Monitoring                         │     │  │       │
│   │  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────────────┐ │     │  │       │
│   │  │VOUT  │  │IOUT  │  │ VIN  │  │  Junction    │ │     │  │       │
│   │  │ADC   │  │ADC   │  │ADC   │  │  Temp ADC    │ │     │  │       │
│   │  │14bit │  │12bit │  │12bit │  │  10bit       │ │     │  │       │
│   │  └───┬──┘  └───┬──┘  └───┬──┘  └───────┬──────┘ │     │  │       │
│   └──────┼─────────┼─────────┼──────────────┼────────┘     │  │       │
│          │         │         │              │              │  │       │
│   ┌──────▼─────────▼─────────▼──────────────▼────────┐    │  │       │
│   │              Digital Control Core                 │    │  │       │
│   │  ┌──────────┐  ┌──────────┐  ┌──────────────┐   │    │  │       │
│   │  │ Digital  │  │   PWM    │  │  Sequencer   │   │    │  │       │
│   │  │  PID     │──│Generator │──│  & Timing    │   │    │  │       │
│   │  │Control   │  │ 4-CH     │  │   Control    │   │    │  │       │
│   │  └──────────┘  └──────────┘  └──────────────┘   │    │  │       │
│   │                                                    │    │  │       │
│   │  ┌──────────┐  ┌──────────┐  ┌──────────────┐   │    │  │       │
│   │  │  12bit   │  │ Soft-    │  │  Calibration │   │    │  │       │
│   │  │  DACs    │  │  Start   │  │   Engine     │   │    │  │       │
│   │  │  (4)     │  │  Control │  │              │   │    │  │       │
│   │  └──────────┘  └──────────┘  └──────────────┘   │    │  │       │
│   └───────────────────────┬────────────────────────────┘  │  │       │
│                           │                                │  │       │
│   ┌───────────────────────▼────────────────────────────┐  │  │       │
│   │          Protection & Fault Management             │  │  │       │
│   │  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌─────────┐ │  │  │       │
│   │  │ OVP  │ │ OCP  │ │UVLO  │ │Therm.│ │  Fault  │ │  │  │       │
│   │  │ 4CH  │ │ 4CH  │ │      │ │Prot. │ │  Logic  │ │  │  │       │
│   │  └──┬───┘ └──┬───┘ └──┬───┘ └──┬───┘ └────┬────┘ │  │  │       │
│   └─────┼────────┼────────┼────────┼──────────┼──────┘  │  │       │
│         │        │        │        │          │          │  │       │
│   ┌─────▼────────▼────────▼────────▼──────────▼────────┐ │  │       │
│   │              Register Interface                     │ │  │       │
│   │  ┌──────────────┐  ┌──────────┐  ┌──────────────┐ │ │  │       │
│   │  │  I2C Slave   │  │ Register │  │   Interrupt  │ │ │  │       │
│   │  │  Controller  │──│   File   │──│    Logic     │─┼─┼─┼─┼─INT# │
│   │  │              │  │          │  │              │ │ │  │       │
│   │  └──────┬───────┘  └──────────┘  └──────────────┘ │ │  │       │
│   └─────────┼──────────────────────────────────────────┘ │  │       │
│             │                                             │  │       │
│         ┌───▼────┐                                        │  │       │
│         │  OTP   │                                        │  │       │
│         │ EEPROM │                                        │  │       │
│         │ 256B   │                                        │  │       │
│         └────────┘                                        │  │       │
│                                                            │  │       │
└────────────────────────────────────────────────────────────┘  │       │
        │         │        │       │                            │       │
       SDA       SCL      EN     GND                          VIN       │
                                                                        │
```

## 3. Single Channel Power Stage Detail

```
                    Channel Power Stage (1 of 4)
┌────────────────────────────────────────────────────────────────┐
│                                                                  │
│  VIN ────────┬────────────────────────────────────────┐        │
│              │                                         │        │
│       ┌──────▼──────┐                                  │        │
│       │  High-Side  │                                  │        │
│       │   PMOS      │                                  │        │
│       │   Switch    │                                  │        │
│       └──────┬──────┘                                  │        │
│              │ SW                                      │        │
│              ├─────────┐                               │        │
│       ┌──────▼──────┐  │                               │        │
│       │  Low-Side   │  │      ┌────┐                  │        │
│       │   NMOS      │  └──────┤ L  │                  │        │
│       │   Switch    │         │2.2µH                  │        │
│       └──────┬──────┘         └─┬──┘                  │        │
│              │                   │ VBUCK               │        │
│         ┌────▼─────┐         ┌───▼────┐               │        │
│         │   Gate   │         │  Cout  │               │        │
│         │  Driver  │         │  10µF  │               │        │
│         └────┬─────┘         └───┬────┘               │        │
│              │                   │                     │        │
│         ┌────▼─────┐             │                     │        │
│         │   PWM    │◄────────────┼─────────────┐      │        │
│         │  Logic   │             │             │      │        │
│         └────▲─────┘             │             │      │        │
│              │                   │             │      │        │
│              │              ┌────▼────┐  ┌─────▼────┐ │        │
│              │              │  Error  │  │ Current  │ │        │
│         ┌────┴─────┐        │   Amp   │  │  Sense   │ │        │
│         │ Digital  │        │         │  │   Amp    │ │        │
│         │  PWM     │        └────┬────┘  └─────┬────┘ │        │
│         │Generator │             │             │      │        │
│         └──────────┘             │             │      │        │
│              ▲                   │             │      │        │
│              │                   │             │      │        │
│              │   ┌───────────────┘             │      │        │
│              │   │                             │      │        │
│              │   │  VBUCK ─────────────────────┘      │        │
│              │   │    │                               │        │
│              │   │    │   ┌──────────────┐           │        │
│              │   │    └───┤   LDO Pass   │           │        │
│              │   │        │   Transistor │           │        │
│              │   │        └──────┬───────┘           │        │
│              │   │               │ VOUT              │        │
│              │   │               ├───────────────────┼─VOUT   │
│              │   │         ┌─────▼────┐              │        │
│              │   │         │   Cout   │              │        │
│              │   │         │   22µF   │              │        │
│              │   │         └─────┬────┘              │        │
│              │   │               │                   │        │
│              │   │         ┌─────▼────┐              │        │
│              │   │         │  Current │              │        │
│              │   └─────────┤  Sense   ├──────────────┘        │
│              │             │  Amp     │                       │
│              │             └─────┬────┘                       │
│              │                   │                            │
│              │             ┌─────▼────┐                       │
│              │             │  Voltage │                       │
│              └─────────────┤  Sense   │                       │
│                            │  Buffer  │                       │
│                            └──────────┘                       │
│                                                                 │
└────────────────────────────────────────────────────────────────┘
```

## 4. Digital Control Core Detail

```
               Digital Control Core
┌─────────────────────────────────────────────────┐
│                                                   │
│  ┌────────────┐      ┌────────────┐             │
│  │  14-bit    │      │  12-bit    │             │
│  │  Voltage   │      │  Current   │             │
│  │   ADC      │      │    ADC     │             │
│  │  (4 CH)    │      │  (4 CH)    │             │
│  └─────┬──────┘      └─────┬──────┘             │
│        │                   │                     │
│  ┌─────▼───────────────────▼──────┐             │
│  │       Data Acquisition          │             │
│  │  ┌──────────┐  ┌──────────┐    │             │
│  │  │Averaging │  │  Filter  │    │             │
│  │  │  Engine  │  │  (IIR)   │    │             │
│  │  └─────┬────┘  └─────┬────┘    │             │
│  └────────┼─────────────┼─────────┘             │
│           │             │                        │
│  ┌────────▼─────────────▼─────────┐             │
│  │    Digital PID Controller       │             │
│  │  ┌──────┐ ┌──────┐ ┌──────┐   │             │
│  │  │  P   │ │  I   │ │  D   │   │             │
│  │  │ Gain │ │ Gain │ │ Gain │   │             │
│  │  └──┬───┘ └──┬───┘ └──┬───┘   │             │
│  │     └────────┼────────┘        │             │
│  │              │                  │             │
│  │         ┌────▼────┐             │             │
│  │         │Summation│             │             │
│  │         └────┬────┘             │             │
│  └──────────────┼──────────────────┘             │
│                 │                                 │
│  ┌──────────────▼──────────────────┐             │
│  │      PWM Generator (4 CH)        │             │
│  │  ┌─────────┐  ┌─────────┐      │             │
│  │  │  Duty   │  │  Phase  │      │             │
│  │  │  Cycle  │  │  Shift  │      │             │
│  │  │  Calc   │  │  Logic  │      │             │
│  │  └────┬────┘  └────┬────┘      │             │
│  └───────┼────────────┼───────────┘             │
│          │            │                          │
│  ┌───────▼────────────▼───────────┐             │
│  │     Sequencing Controller       │             │
│  │  ┌──────────┐  ┌──────────┐   │             │
│  │  │  Enable  │  │  Delay   │   │             │
│  │  │  Order   │  │  Timers  │   │             │
│  │  └──────────┘  └──────────┘   │             │
│  │  ┌──────────┐  ┌──────────┐   │             │
│  │  │Soft-Start│  │  Ramp    │   │             │
│  │  │  Control │  │  Rate    │   │             │
│  │  └──────────┘  └──────────┘   │             │
│  └──────────────────────────────┘             │
│                                                   │
│  ┌─────────────────────────────────┐            │
│  │     Calibration Engine           │            │
│  │  ┌──────────┐  ┌──────────┐     │            │
│  │  │   Gain   │  │  Offset  │     │            │
│  │  │  Correct │  │  Correct │     │            │
│  │  └──────────┘  └──────────┘     │            │
│  │  ┌──────────┐                    │            │
│  │  │   OTP    │                    │            │
│  │  │  Access  │                    │            │
│  │  └──────────┘                    │            │
│  └─────────────────────────────────┘            │
│                                                   │
└─────────────────────────────────────────────────┘
```

## 5. Protection and Monitoring Detail

```
          Protection and Monitoring
┌──────────────────────────────────────────────┐
│                                                │
│  ┌──────────────────────────────────────┐    │
│  │    Over-Voltage Protection (4 CH)    │    │
│  │  ┌────────┐     ┌────────┐           │    │
│  │  │ VOUT   │────▶│Compare │──┐        │    │
│  │  │ Sense  │     │  vs    │  │        │    │
│  │  └────────┘     │ 110%   │  │        │    │
│  │  ┌────────┐     │Threshold   │        │    │
│  │  │ VDAC   │────▶│        │  │        │    │
│  │  └────────┘     └────────┘  │        │    │
│  └──────────────────────────────┼────────┘    │
│                                 │             │
│  ┌──────────────────────────────▼────────┐    │
│  │    Over-Current Protection (4 CH)     │    │
│  │  ┌────────┐     ┌────────┐           │    │
│  │  │ IOUT   │────▶│Compare │──┐        │    │
│  │  │ Sense  │     │  vs    │  │        │    │
│  │  └────────┘     │ Limit  │  │        │    │
│  │  ┌────────┐     │        │  │        │    │
│  │  │ ILIMIT │────▶│        │  │        │    │
│  │  │Register│     └────────┘  │        │    │
│  │  └────────┘                 │        │    │
│  └──────────────────────────────┼────────┘    │
│                                 │             │
│  ┌──────────────────────────────▼────────┐    │
│  │      Thermal Protection               │    │
│  │  ┌────────┐     ┌────────┐           │    │
│  │  │  Temp  │────▶│ Comp   │──┐        │    │
│  │  │ Sensor │     │100°C   │  │Warning │    │
│  │  └────────┘     └────────┘  │        │    │
│  │                 ┌────────┐  │        │    │
│  │                 │ Comp   │──┼───┐    │    │
│  │                 │125°C   │  │   │Shutdown │
│  │                 └────────┘  │   │    │    │
│  └──────────────────────────────┼───┼────┘    │
│                                 │   │         │
│  ┌──────────────────────────────▼───▼────┐    │
│  │          Fault Logic                  │    │
│  │  ┌────────┐  ┌────────┐  ┌────────┐  │    │
│  │  │ Fault  │  │Priority│  │ Action │  │    │
│  │  │Classify│─▶│ Logic  │─▶│ Logic  │──┼──┐ │
│  │  └────────┘  └────────┘  └────────┘  │  │ │
│  │  ┌────────┐  ┌────────┐              │  │ │
│  │  │ Fault  │  │Auto-   │              │  │ │
│  │  │Status  │  │Recovery│              │  │ │
│  │  │Registers  │  │Logic   │              │  │ │
│  │  └────────┘  └────────┘              │  │ │
│  └──────────────────────────────────────┘  │ │
│                                             │ │
│  ┌──────────────────────────────────────┐  │ │
│  │      Power Good Logic (4 CH)         │  │ │
│  │  ┌────────┐     ┌────────┐          │  │ │
│  │  │ VOUT   │────▶│Window  │──┐       │  │ │
│  │  │ Sense  │     │Compare │  │       │  │ │
│  │  └────────┘     │±2%     │  │       │  │ │
│  │  ┌────────┐     └────────┘  │       │  │ │
│  │  │ VDAC   │────▶             │       │  │ │
│  │  └────────┘                 │PG     │  │ │
│  │                 ┌────────┐  │       │  │ │
│  │                 │Debounce├──┘       │  │ │
│  │                 └────────┘          │  │ │
│  └──────────────────────────────────────┘  │ │
│                                             │ │
└─────────────────────────────────────────────┼─┘
                                              │
                                           To Register
                                           Interface &
                                           Interrupt Logic
```

## 6. I2C Interface and Register File

```
           I2C Interface
┌─────────────────────────────────────┐
│                                      │
│  SDA ──┬──▶┌────────────┐           │
│        │   │    I2C     │           │
│  SCL ──┼──▶│   Slave    │           │
│        │   │ Controller │           │
│  ADDR──┘   └──────┬─────┘           │
│                   │                 │
│            ┌──────▼──────┐          │
│            │  Address    │          │
│            │  Decoder    │          │
│            └──────┬──────┘          │
│                   │                 │
│            ┌──────▼──────┐          │
│            │   Register  │          │
│            │    File     │          │
│            │             │          │
│            │ 0x00-0x0F  │ Device ID│
│            │ 0x10-0x4F  │ Ch 1-4  │
│            │ 0x50-0x5F  │ Global  │
│            │ 0x60-0x6F  │ Fault   │
│            │ 0x70-0x7F  │ Cal     │
│            └──────┬──────┘          │
│                   │                 │
│            ┌──────▼──────┐          │
│            │  Interrupt  │          │
│            │   Logic     │          │
│            │             │          │
│            │ ┌─────────┐ │          │
│            │ │  Mask   │ │          │
│            │ └─────────┘ │          │
│            │ ┌─────────┐ │          │
│            │ │ Status  │ │          │
│            │ └─────────┘ │          │
│            └──────┬──────┘          │
│                   │                 │
│                   └─────────────INT#│
│                                      │
└─────────────────────────────────────┘
```

## 7. Power-Up Sequence Timing

```
VIN     ─────┐
             │               Power Applied
             └───────────────────────────────▶

UVLO    ─────────┐
Release           │      UVLO Threshold
                  └─────────────────────────▶

POR     ─────────────┐
                     │  Power-On Reset
                     └───────────────────────▶

VREF    ──────────────────┌──────
                          │ Bandgap Startup
                          └─────────────────▶

Digital ──────────────────────┌───
Core                          │ Init Complete
                              └───────────────▶

EN      ─────────────────────────────┐
Input                                │ User Enable
                                     └─────────▶

CH1     ─────────────────────────────────┌──
VOUT                                     │ Soft-start
                                         └─────▶

CH2     ────────────────────────────────────┌──
VOUT                                        │ Delayed
                                            └───▶

PG      ────────────────────────────────────────┐
                                                │
                                                └──▶

Time    0    1ms   5ms   10ms  15ms  20ms  25ms
        │     │     │     │     │     │     │
```

## 8. Physical Layout Considerations

```
        Top View - QFN-48 Package
┌─────────────────────────────────────┐
│                                      │
│  1 VIN        PM-5000         GND 48│
│  2 VIN                         GND 47│
│  3 EN                          GND 46│
│  4 ADDR0                     VOUT4 45│
│  5 ADDR1                     VOUT4 44│
│  6 NC                        VOUT4 43│
│  7 SW1                       VOUT3 42│
│  8 SW1                       VOUT3 41│
│  9 VOUT1                     VOUT3 40│
│ 10 VOUT1                       SW4 39│
│ 11 VOUT1                       SW4 38│
│ 12 GND                         SW3 37│
│                                      │
│           ┌────────────┐            │
│           │  Thermal   │            │
│           │    Pad     │            │
│           │  (Exposed) │            │
│           └────────────┘            │
│                                      │
│ 13 SDA                        VOUT2 36│
│ 14 SCL                        VOUT2 35│
│ 15 INT#                       VOUT2 34│
│ 16 NC                           SW2 33│
│ 17 NC                           SW2 32│
│ 18-24 GND                   GND 25-31│
│                                      │
└─────────────────────────────────────┘
         7mm × 7mm × 0.9mm
```

## 9. Thermal Layout Recommendation

```
        Cross-Section View
        
        Component Side
┌──────────────────────────────────┐
│         PM-5000 IC                │
├──────────────────────────────────┤
│     Thermal Pad (Solder)         │ ◄─ Must be soldered
├──────────────────────────────────┤
│     Top Copper Layer (2oz)       │
├──────────────────────────────────┤
│     Thermal Vias (array)         │ ◄─ Via in pad
├──────────────────────────────────┤
│     Inner Layer 1 (GND plane)    │
├──────────────────────────────────┤
│     Inner Layer 2 (PWR plane)    │
├──────────────────────────────────┤
│     Bottom Copper Layer (2oz)    │ ◄─ Heat spreading
├──────────────────────────────────┤
│     Optional Heat Spreader       │
└──────────────────────────────────┘

Thermal Via Recommendations:
- Via diameter: 0.3mm
- Via spacing: 0.8mm
- Via count: 25-30 vias
- Via location: Under thermal pad
```

## 10. Revision History

| Version | Date | Author | Changes |
|---------|------|--------|---------|
| 1.0 | Oct 2025 | Hardware Design | Initial release |
